# MonitorSysUA 产品需求文档 (PRD)

## 文档信息
- **产品名称**：MonitorSysUA - Google Ads 智能监控与优化系统
- **版本**：v2.0
- **创建日期**：2024-11-19
- **负责人**：Chaoyu
- **状态**：设计阶段

---

## 一、产品概述

### 1.1 产品定位

MonitorSysUA 是一个针对移动游戏（如Solitaire）的Google Ads投放智能监控与优化系统。系统通过自动化监控、数据分析、效果评价和操作建议，帮助优化师提高投放ROI，降低决策成本，加快迭代速度。

**核心价值主张：**
- **监控自动化**：实时捕获Google Ads的所有变更操作
- **评价智能化**：基于历史数据自动评价campaign和素材表现
- **决策数据化**：提供量化的调整建议，减少主观判断
- **执行闭环化**：从监控到执行形成完整的反馈循环

### 1.2 业务背景

**当前痛点：**

1. **监控盲区**：优化师无法实时知道团队其他成员对campaign做了什么调整
2. **评价困难**：缺乏标准化的评价体系，无法量化操作效果
3. **决策低效**：依赖经验判断，缺乏数据支撑，容易犯错
4. **迭代缓慢**：从发现问题到执行调整，流程过长，错过最佳时机
5. **素材浪费**：好素材难以快速识别和复用，测试成本高

**目标用户：**
- **主用户**：广告优化师（Optimizer）
- **辅助用户**：投放团队负责人、数据分析师

### 1.3 产品目标

**短期目标（3个月）：**
- 实现所有Google Ads操作的实时监控和记录
- 建立基于安全线的campaign评价体系
- 为优化师提供可视化的调整建议

**中期目标（6个月）：**
- 实现建议的自动执行（优化师确认后通过API执行）
- 建立素材测试与同步机制
- 积累足够数据，优化评价算法

**长期目标（12个月）：**
- 引入机器学习，预测campaign表现
- 支持多渠道（Facebook、TikTok）、多平台（iOS、Android）
- 实现全自动投放（AI自主决策）

---

## 二、核心功能模块

### 2.1 监控模块（已实现）

**功能描述：**
实时捕获并记录所有Google Ads账户的操作变更，包括：
- Campaign预算调整
- Campaign tROAS（目标ROAS）调整
- Campaign启用/暂停/删除
- Campaign创建
- Ad Group调整
- 关键词调整

**数据记录内容：**
- 操作时间（精确到秒）
- 操作人（Google账户邮箱）
- 操作类型（预算/tROAS/状态等）
- 变更前的值
- 变更后的值
- 受影响的Campaign信息

**业务价值：**
- 团队协作透明化：所有人都能看到谁做了什么调整
- 问题追溯：当campaign表现异常时，快速定位是谁的操作导致
- 操作审计：留存完整的操作历史，便于复盘

---

### 2.2 安全线系统

#### 2.2.1 核心概念

**什么是安全线？**

安全线是基于**180天前（6个月前）**的历史数据计算出的ROAS7和RET7基准值。这个基准代表了"及格水平"：
- 如果当前campaign的表现**达到或超过**安全线 → 投放健康
- 如果当前campaign的表现**低于**安全线 → 需要优化或关停

**为什么是180天？**
- 移动游戏的LTV（用户生命周期价值）回收周期通常是180天
- 180天前的数据足够稳定，不受近期市场波动、季节性因素影响
- 避免"拿今天的标准要求昨天"，给campaign合理的成长空间
- 随着时间推移，安全线会动态更新（例如：12月参考6月，1月参考7月）

#### 2.2.2 计算逻辑

**参考期确定：**
```
当前月份：2024年12月
参考期：2024年6月（往前推6个月）

当前月份：2025年1月
参考期：2024年7月（往前推6个月）
```

**ROAS7安全线计算：**
```
baseline_roas7 = 参考期所有campaign的总收入 / 参考期所有campaign的总花费

示例：
6月份投放总花费：$100,000
6月份投放带来的D0-D7总收入：$45,000
baseline_roas7 = $45,000 / $100,000 = 45%
```

**RET7安全线计算：**
```
baseline_ret7 = 参考期所有用户的7日留存率

示例：
6月份总安装数：10,000
6月份D7仍活跃用户数：3,800
baseline_ret7 = 3,800 / 10,000 = 38%
```

#### 2.2.3 分层维度

安全线按以下维度分别计算：
- **产品**（Solitaire、Poker、Mahjong...）
- **国家**（US、JP、KR、UK、CA...）
- **平台**（Android、iOS）
- **渠道**（Google、Facebook、TikTok）

**示例：**
```
产品：Solitaire
国家：美国
平台：Android
渠道：Google
参考期：2024-06
baseline_roas7: 45%
baseline_ret7: 38%

产品：Solitaire
国家：日本
平台：Android
渠道：Google
参考期：2024-06
baseline_roas7: 52%
baseline_ret7: 41%
```

#### 2.2.4 更新机制

- **更新频率**：每月1号自动更新所有安全线
- **历史记录**：保留每个月的安全线数值，用于趋势分析
- **人工校准**：允许优化师根据业务判断手动调整安全线（例如：旺季/淡季）

---

### 2.3 Campaign评价系统

#### 2.3.1 Campaign分类

系统根据总消耗金额自动将campaign分为两类，采用不同的评价标准：

**测试Campaign（Test）：**
- **判断标准**：总消耗 < $1,000
- **业务目的**：测试新素材、新投放策略、新受众
- **评价重点**：素材质量（CPI、转化率、短期ROI）
- **调整频率**：3-7天一次（根据表现决定）

**成熟Campaign（Mature）：**
- **判断标准**：总消耗 >= $1,000
- **业务目的**：规模化赚钱，稳定产出
- **评价重点**：ROI表现（ROAS7、RET7）
- **调整频率**：7天一次（避免频繁调整导致算法不稳定）

#### 2.3.2 核心指标详解

**ROAS7（7日广告投资回报率）**

**定义：**
```
ROAS7 = D0-D7的总收入 / 广告花费
```

**计算示例：**
```
某campaign在11月1号花费：$1,000
这批用户在D0-D7产生的总收入：$450
ROAS7 = $450 / $1,000 = 45%
```

**解读标准：**
- **ROAS7 = 100%**：投入产出持平（盈亏平衡点）
- **ROAS7 > 100%**：7天内已经赚钱
- **ROAS7 < 100%**：7天内亏损（但长期可能回本，因为用户会在D8-D180继续付费）

**业务意义：**
- 衡量短期回收效率
- 预测长期LTV的先行指标
- 快速判断campaign是否值得继续投入

---

**RET7（7日留存率）**

**定义：**
```
RET7 = D7仍活跃的用户数 / 总安装数
```

**计算示例：**
```
某campaign带来100个安装
7天后，38个用户仍在活跃（打开过游戏）
RET7 = 38 / 100 = 38%
```

**解读标准：**
- **RET7高（>40%）**：用户质量好，长期价值高
- **RET7中（30%-40%）**：用户质量一般
- **RET7低（<30%）**：用户质量差，即使短期付费也会快速流失

**业务意义：**
- 衡量用户质量
- 预测长期LTV
- 防止"薅羊毛用户"（充一笔钱就走）

---

**为什么要同时看ROAS7和RET7？**

| 场景 | ROAS7 | RET7 | 问题 | 结果 |
|------|-------|------|------|------|
| 场景A | 高（60%） | 低（20%） | 用户充值后立刻流失 | 短期赚钱，长期亏损 |
| 场景B | 低（30%） | 高（45%） | 用户留存好但不付费 | 短期亏损，长期可能回本 |
| 场景C | 高（55%） | 高（42%） | 理想状态 | 既赚钱又有长期价值 |
| 场景D | 低（25%） | 低（18%） | 用户质量差 | 短期长期都亏损，立即关停 |

**结论：只有两个指标都健康，campaign才算真正健康。**

#### 2.3.3 达成率计算

**公式：**
```
达成率 = 实际值 / 安全线基准值 × 100%
```

**完整示例：**
```
安全线（来自2024年6月数据）：
- baseline_roas7 = 45%
- baseline_ret7 = 38%

某campaign当前表现（2024年12月）：
- actual_roas7 = 54%
- actual_ret7 = 42%

计算达成率：
- roas_achievement_rate = 54% / 45% × 100% = 120%
- ret_achievement_rate = 42% / 38% × 100% = 110.5%

最小达成率（取短板）：
- min_achievement_rate = min(120%, 110.5%) = 110.5%
```

**为什么用最小值？**
- **木桶效应**：短板决定整体表现
- 任何一个指标拉胯都会影响campaign的整体健康度
- 避免"顾此失彼"（ROAS高但留存烂，或留存高但不赚钱）

#### 2.3.4 评价规则与建议

**评价等级体系：**

| 最小达成率 | 状态 | 建议类型 | 业务含义 | 操作方向 |
|----------|------|---------|---------|---------|
| < 60% | 🔴 危险 | 立即关停 | 严重亏损，继续投放就是烧钱 | 立即暂停campaign |
| 60% - 85% | 🟠 预警 | 保守缩量 | 表现不佳，减少投入观察变化 | 降预算或提tROAS |
| 85% - 100% | 🟡 观察 | 继续观察 | 接近及格线，保持现状等数据 | 不调整，持续监控 |
| 100% - 110% | 🟢 健康 | 保守扩量/观察 | 达标，可小幅增加投入测试 | 小幅加预算或降tROAS |
| >= 110% | 🟢 优秀 | 激进扩量 | 表现优异，应该大幅增加投入 | 大幅加预算或降tROAS |

**具体建议动作：**

**当建议扩量时，系统提供以下选项（可多选）：**
- ☐ 提高预算（推荐幅度：+1% / +3% / +5%，或自定义）
- ☐ 降低tROAS（降低目标ROI，换取更大量级，推荐幅度：-1% / -3% / -5%，或自定义）
- ☐ 暂不调整，继续观察

**当建议缩量时，系统提供以下选项（可多选）：**
- ☐ 降低预算（推荐幅度：-1% / -3% / -5%，或自定义）
- ☐ 提高tROAS（提高目标ROI，筛选更优质流量，推荐幅度：+1% / +3% / +5%，或自定义）
- ☐ 更换素材（针对测试campaign）
- ☐ 暂停campaign
- ☐ 继续观察

**调整幅度的设计原则：**
- **1%**：试探性调整，风险极低
- **3%**：标准调整幅度，适合大多数情况
- **5%**：激进调整，适合表现非常好或非常差的情况
- **自定义**：给经验丰富的优化师更大的灵活性

#### 2.3.5 评价频率

- **成熟Campaign**：每7天评价一次
- **测试Campaign**：D3和D7各评价一次
- **特殊情况**：当达成率 < 60% 时，每3天提示一次

---

### 2.4 素材评价系统（测试Campaign专属）

#### 2.4.1 业务背景

**为什么需要素材评价？**

测试campaign的目的是找到"出量好素材"（既能拿到量，又能赚到钱的素材），然后快速复用到成熟campaigns，实现规模化。

传统方式的问题：
- 优化师人工判断素材好坏，效率低
- 缺乏标准化的评价体系，容易遗漏好素材
- 好素材识别太慢，错过最佳投放窗口期

系统化评价的优势：
- 自动识别"出量好素材"
- 标准化评价，不遗漏
- 快速同步到成熟campaigns，规模化变现

#### 2.4.2 核心指标

**CPI（Cost Per Install，单个安装成本）**

**定义：**
```
CPI = 广告花费 / 安装数
```

**示例：**
```
素材A花费：$300
带来安装数：50
CPI = $300 / 50 = $6
```

**阈值设定（按国家分层）：**
- **美国**：CPI < $7 为合格
- **日本**：CPI < $10 为合格
- **韩国**：CPI < $8 为合格
- **小国家**（东南亚、拉美等）：CPI < $4 为合格

**业务意义：**
- CPI过高 → 素材吸引力不足，或受众定向有问题
- CPI合理 → 素材有基本的吸引力

---

**CVR（Conversion Rate，转化率）**

**定义：**
```
CVR = 安装数 / 展示数
```

**示例：**
```
素材B获得展示数：3,000
带来安装数：20
CVR = 20 / 3,000 = 0.67%
```

**"出量好素材"的标准：**
```
CVR >= 0.67% (即：3000展示能带来至少20个安装)
```

**为什么这个标准？**
- 不仅要转化率高，还要能拿到足够的流量（展示数）
- 有些素材转化率高但拿不到量，扩量价值有限
- CVR >= 0.67% 的素材通常能同时满足"质"和"量"

---

**ROAS（短期ROI）**

**定义：**
```
测试期的ROAS：
- D1 ROAS = D0-D1的收入 / 花费
- D3 ROAS = D0-D3的收入 / 花费
- D7 ROAS = D0-D7的收入 / 花费
```

**快速判断标准：**
- **D1 ROAS < 10%**：立即停止（用户基本不付费）
- **D3 ROAS < 15%**：不及格（付费意愿低）
- **D7 ROAS < baseline_roas7**：不及格（达不到安全线）

#### 2.4.3 评价时机与流程

**D3评价（第一次筛选）**

**时机**：素材上线后第3天

**评价指标**：
- CPI
- ROAS3

**判断逻辑**：
```
if CPI > max_cpi_threshold:
    标记为"不及格" → 建议关停
    原因：成本太高
elif ROAS3 < min_roas_d3:
    标记为"不及格" → 建议关停
    原因：用户付费意愿低
else:
    标记为"测试中" → 继续观察到D7
```

**业务价值**：
- 快速止损，避免持续浪费预算在烂素材上
- 3天就能初步判断素材质量

---

**D7评价（最终判断）**

**时机**：素材上线后第7天

**评价指标**：
- CPI
- ROAS7
- CVR

**判断逻辑**：
```
if CPI合格 AND ROAS7合格 AND CVR >= excellent_cvr:
    标记为"出量好素材" ⭐
    → 推荐同步到成熟campaign

elif CPI合格 AND ROAS7合格:
    标记为"及格" ✅
    → 可以继续跑，但不是顶级素材

else:
    标记为"不及格" ❌
    → 建议关停
```

**业务价值**：
- 精准识别"出量好素材"
- 为素材同步提供依据

#### 2.4.4 素材生命周期

**状态流转：**
```
创建测试campaign，上传10个素材
                ↓
        素材状态：测试中
                ↓
            D3评价
        /             \
    不及格❌         继续测试
    (关停)              ↓
                    D7评价
                /      |      \
          不及格❌  及格✅  出量好素材⭐
          (关停)   (继续跑)      ↓
                           待确认
                        (优化师审核)
                              ↓
                          已同步
                    (加入成熟campaign)
```

#### 2.4.5 Campaign级别的判断

**测试Campaign整体关停逻辑：**
```
条件：所有素材都已完成D7评价 AND 没有一个素材及格

结果：系统建议关停整个测试campaign

原因：这批素材整体质量不行，继续测试是浪费预算
```

**示例：**
```
测试Campaign A：上传10个素材
D3评价：4个不及格，关停
D7评价：剩余6个素材，全部不及格

系统判断：这批素材整体不行
建议：关停整个Campaign A，准备下一批素材
```

---

### 2.5 操作评分系统

#### 2.5.1 业务目标

**为什么需要操作评分？**

- **形成反馈循环**：优化师做了调整后，需要知道调整是否有效
- **优化师能力量化**：通过评分，识别哪些优化师更擅长投放
- **经验积累**：记录哪些调整有效，哪些调整无效，形成最佳实践
- **团队管理**：帮助团队负责人了解每个优化师的表现

#### 2.5.2 评分时机

**时间延迟：操作后7天**

**原因：**
- 需要等ROAS7和RET7数据完整
- Google Ads算法需要时间学习和稳定
- 过早评价可能不准确

**示例：**
```
操作时间：2024年11月11日 05:36:09
评分时间：2024年11月18日（操作后7天）
```

#### 2.5.3 评分逻辑

**记录操作时的基准：**
- 操作日期
- 操作类型（预算调整/tROAS调整）
- 操作内容（$1,000 → $2,000）
- 当时的安全线（baseline_roas7, baseline_ret7）

**计算操作后的表现：**
- 操作后7天的实际ROAS7
- 操作后7天的实际RET7

**计算达成率：**
```
roas_achievement_rate = actual_roas7 / baseline_roas7 × 100%
ret_achievement_rate = actual_ret7 / baseline_ret7 × 100%
```

#### 2.5.4 评分展示

**单个操作评分卡：**
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
操作评分

优化师：huihui.lu@castbox.fm
操作时间：2024-11-11 05:36:09
操作类型：预算调整
操作内容：$1,000 → $2,000 (+100%)
Campaign：Solitaire_US_Android_001

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
评分结果（7天后）

ROAS7达成率：120% ✅
  - 安全线：45%
  - 实际表现：54%

RET7达成率：110.5% ✅
  - 安全线：38%
  - 实际表现：42%

综合评价：优秀
这次调整有效提升了campaign表现
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

#### 2.5.5 优化师排行榜

**统计维度：**
- 总操作次数
- 优秀操作比例（达成率 >= 110%）
- 平均达成率
- 失败操作比例（达成率 < 85%）
- 最近30天表现趋势

**排行榜示例：**
```
┌────────────┬──────┬────────┬──────────┬────────┐
│ 优化师     │ 操作 │ 优秀率 │ 平均达成 │ 失败率 │
│            │ 次数 │        │ 率       │        │
├────────────┼──────┼────────┼──────────┼────────┤
│ Alice      │  45  │  68%   │  115%    │  12%   │
│ Bob        │  38  │  55%   │  108%    │  18%   │
│ Charlie    │  32  │  72%   │  118%    │   9%   │
│ David      │  28  │  50%   │  102%    │  25%   │
└────────────┴──────┴────────┴──────────┴────────┘
```

**业务价值：**
- 识别优秀的优化师，作为榜样
- 发现需要培训的优化师
- 形成良性竞争，提升团队整体水平

---

## 三、Google Ads API 交互需求

### 3.1 已实现的API能力（监控层）

**需求描述：**
系统需要能够定时从Google Ads获取以下信息：

**1. 操作变更历史**
- 获取指定时间段内的所有变更事件
- 包含：变更时间、操作人、变更类型、变更前后的值
- 筛选条件：按时间范围、按campaign、按操作类型

**2. Campaign基础信息**
- Campaign ID、名称、状态（启用/暂停）
- 当前预算、当前tROAS设置
- Campaign类型、投放地区、投放平台

**3. Campaign性能数据**
- 按日期范围查询：展示数、点击数、安装数
- 花费金额、转化数、转化价值
- 分时段数据（用于计算ROAS7）

### 3.2 待实现的API能力（执行层）

**需求描述：**
系统需要能够通过API自动执行优化师选择的调整操作：

**1. 预算调整能力**
- 输入：Campaign ID + 调整百分比（例如：+3%）
- 执行：获取当前预算 → 计算新预算 → 更新预算
- 输出：操作结果（成功/失败）+ 新预算值

**2. tROAS调整能力**
- 输入：Campaign ID + 调整百分比（例如：-5%）
- 执行：获取当前tROAS → 计算新tROAS → 更新tROAS
- 输出：操作结果 + 新tROAS值

**3. Campaign暂停能力**
- 输入：Campaign ID
- 执行：将campaign状态设置为"暂停"
- 输出：操作结果

**4. 素材同步能力**
- 输入：源素材ID + 源Campaign ID + 目标Campaign ID列表
- 执行：
  - 获取源素材的所有assets（图片、视频、文案）
  - 在目标campaigns中创建相同的ad
  - 设置相同的targeting配置
- 输出：每个目标campaign的操作结果

### 3.3 API调用频率管理

**挑战：**
- Google Ads API有每日调用次数限制（标准账户15,000次/天）
- 频繁调用可能触发限流

**解决方案需求：**
- 实现请求队列机制，控制调用频率
- 对campaign基础信息进行缓存（1小时TTL）
- 批量请求：一次API调用获取多个campaigns的数据
- 错误重试：遇到限流时等待后重试

### 3.4 数据同步时机

**实时监控（高频）：**
- 操作变更：每5分钟拉取一次
- 用于及时发现新的调整操作

**性能数据（低频）：**
- Campaign性能：每天凌晨拉取一次前一天的数据
- 用于计算ROAS7、RET7

**基础信息（按需）：**
- Campaign详情：首次评价时拉取，之后从缓存读取
- 需要更新时再重新拉取

---

## 四、用户场景与操作流程

### 4.1 场景1：优化师日常巡检

**用户角色：** 广告优化师Alice

**场景描述：**
每天早上9点上班，Alice需要检查所有campaigns的表现，发现问题并及时调整。

**传统方式的问题：**
- 需要逐个打开Google Ads查看每个campaign
- 无法快速识别哪些campaigns需要关注
- 缺乏标准化的判断依据，容易遗漏问题

**使用MonitorSysUA的流程：**

1. **登录系统，查看Dashboard**
   - 看到今日概览：
     - 🟢 正常：45个campaigns
     - 🟡 观察：12个campaigns
     - 🟠 预警：3个campaigns
     - 🔴 危险：1个campaign

2. **优先处理危险campaign**
   - 点击"危险"标签
   - 看到Campaign详情卡片：
   ```
   Campaign: Solitaire_US_Test_021
   状态: 🔴 达成率 55%

   表现数据：
   - ROAS7: 26% (安全线: 45%, 达成率: 58%)
   - RET7: 21% (安全线: 38%, 达成率: 55%)

   系统建议: 立即关停
   原因：达成率 < 60%，继续投放会持续亏损
   ```

3. **执行操作**
   - Alice确认数据无误
   - 点击"暂停campaign"按钮
   - 系统通过API执行暂停操作
   - 显示执行成功
   - 系统记录此次操作，7天后自动评分

4. **处理预警campaign**
   - 点击"预警"标签
   - 看到3个campaigns的达成率在60%-85%
   - 系统建议：保守缩量
   - Alice选择其中2个：降低预算 -5%
   - 另外1个：提高tROAS +3%
   - 系统批量执行

**时间对比：**
- 传统方式：约45分钟
- 使用系统：约10分钟
- **效率提升：78%**

---

### 4.2 场景2：测试新素材并快速复用

**用户角色：** 广告优化师Bob

**场景描述：**
Bob收到设计团队提供的10个新素材（针对圣诞节主题），需要测试并快速复用好素材。

**传统方式的问题：**
- 需要手动跟踪每个素材的CPI、ROAS
- 判断"好素材"依赖经验，可能遗漏
- 复用素材需要手动复制到多个campaigns，容易出错

**使用MonitorSysUA的流程：**

1. **创建测试campaign**
   - 在Google Ads中创建新campaign
   - Campaign名称：Solitaire_US_Xmas_Test_001
   - 预算设置：$500
   - 上传10个素材

2. **D3自动评价**
   - 系统在第3天自动评价所有素材
   - Bob收到系统通知：
   ```
   测试Campaign: Solitaire_US_Xmas_Test_001
   D3评价结果：

   ❌ 素材1-4：不及格
      原因：CPI > $8 或 ROAS3 < 10%
      建议：关停这4个素材

   ⏳ 素材5-10：测试中
      当前表现：CPI在$5-7之间，ROAS3在12%-18%
      建议：继续观察到D7
   ```

3. **关闭不及格素材**
   - Bob在系统中批量选择素材1-4
   - 点击"关停素材"
   - 系统通过API执行

4. **D7最终评价**
   - 系统在第7天再次评价
   - Bob收到通知：
   ```
   D7评价结果：

   ⭐ 素材7：出量好素材
      - CPI: $5.2
      - ROAS7: 48%
      - CVR: 0.8%
      建议：同步到成熟campaigns

   ✅ 素材5,6,8,9：及格
      继续在测试campaign中跑

   ❌ 素材10：不及格
      建议：关停
   ```

5. **同步出量好素材**
   - Bob点击素材7的"同步"按钮
   - 系统推荐：同步到以下3个成熟campaigns：
     - Solitaire_US_Main_001
     - Solitaire_US_Main_002
     - Solitaire_US_Main_003
   - Bob确认
   - 系统自动：
     - 复制素材7的所有assets
     - 在3个成熟campaigns中创建新ad
     - 更新素材7状态为"已同步"

**时间对比：**
- 传统方式（手动跟踪+手动复制）：约2小时
- 使用系统：约15分钟
- **效率提升：87%**

---

### 4.3 场景3：Campaign表现波动分析

**用户角色：** 投放团队负责人Carol

**场景描述：**
一个之前表现很好的主力campaign突然表现下滑，Carol需要快速定位问题原因。

**传统方式的问题：**
- 不清楚是谁做了什么调整导致表现下滑
- 缺乏历史趋势数据，无法判断是短期波动还是长期问题
- 不知道该如何调整才能恢复表现

**使用MonitorSysUA的流程：**

1. **系统自动发现异常**
   - 每日评价任务发现异常
   - 系统发送通知：
   ```
   ⚠️ Campaign表现下滑警报

   Campaign: Solitaire_US_Main_003
   上周达成率：125% (优秀)
   本周达成率：88% (观察)
   状态变更：🟢优秀 → 🟡观察
   ```

2. **查看详细分析**
   - Carol点击进入campaign详情页
   - 看到历史趋势图：
     - ROAS7从55%持续下降到40%
     - RET7从42%下降到35%
     - 下降开始于11月10号

3. **查看操作历史**
   - Carol点击"操作历史"
   - 看到：
   ```
   11月9号 18:30 - Bob
   操作：预算调整 $5,000 → $8,000 (+60%)
   ```

4. **分析原因**
   - Carol分析：预算大幅增加后，campaign开始获取更多流量
   - 但新增流量质量下降，导致整体ROAS和RET下降
   - 判断：预算跑满导致Google算法开始抓取边缘流量

5. **执行调整**
   - 系统建议：继续观察或保守缩量
   - Carol选择：降低预算 -20%（回到$6,400）
   - 系统执行调整

6. **跟踪效果**
   - 7天后，系统自动评分
   - 结果：达成率恢复到95%
   - 操作评分：
     - ROAS达成率：95%
     - RET达成率：97%
   - 评价：合格，调整有效

**业务价值：**
- 快速定位问题原因（操作历史追溯）
- 数据驱动决策（趋势图+达成率）
- 验证调整效果（操作评分）

---

## 五、数据流转逻辑

### 5.1 整体流程图

```
Google Ads Platform (广告平台)
    ↓
    | 优化师操作：调整预算、tROAS、创建campaign等
    ↓
Google Ads API
    ↓
    | 每5分钟同步一次操作记录
    ↓
MonitorSysUA 监控层
    ↓
    | 记录到 change_events 表
    ↓
每日凌晨 定时任务
    ↓
    |---→ 更新安全线（每月1号）
    |---→ 评价所有campaigns（每7天一次）
    |---→ 评价测试campaign的素材（D3和D7）
    |---→ 评价操作（操作后7天）
    ↓
生成评价结果 + 建议动作
    ↓
    | 存储到数据库
    ↓
前端Dashboard
    ↓
    | 优化师查看并选择建议动作
    ↓
优化师确认执行
    ↓
    | 调用 Google Ads API
    ↓
执行调整（预算/tROAS/暂停/素材同步）
    ↓
    | 记录到 change_events 表（形成闭环）
    ↓
7天后自动评分
```

### 5.2 素材生命周期流转

```
设计团队产出10个新素材
    ↓
优化师创建测试campaign并上传素材
    ↓
    | 素材状态：测试中
    ↓
D0-D3：素材开始投放
    ↓
D3评价（第一次筛选）
    ↓
    |---→ 素材1-4：CPI高 or ROAS低 → 不及格 → 关停 ❌
    |
    |---→ 素材5-10：继续测试 → 保持"测试中"状态
    ↓
D4-D7：继续投放
    ↓
D7评价（最终判断）
    ↓
    |---→ 素材7：CPI+ROAS+CVR全部达标 → 出量好素材 ⭐
    |         ↓
    |      标记为"待确认"
    |         ↓
    |      优化师审核确认
    |         ↓
    |      同步到3个成熟campaigns
    |         ↓
    |      标记为"已同步"
    |
    |---→ 素材5,6,8,9：CPI+ROAS达标 → 及格 ✅
    |         ↓
    |      继续在测试campaign中跑
    |
    |---→ 素材10：不达标 → 不及格 → 关停 ❌
    ↓
检查整个测试campaign
    ↓
    | 如果所有素材D7评价完，没有一个及格
    ↓
建议关停整个测试campaign
```

### 5.3 评价系统的数据依赖

```
计算ROAS7和RET7
    ↓
需要以下数据：
    |
    |---→ Google Ads API: 花费、安装数、收入
    |---→ 内部数据库: 用户行为数据（用于计算留存）
    ↓
查询安全线
    ↓
    | 根据产品、国家、平台、渠道查询
    ↓
计算达成率
    ↓
    | actual / baseline × 100%
    ↓
根据达成率生成建议
    ↓
    | < 60%: 关停
    | 60-85%: 缩量
    | 85-100%: 观察
    | 100-110%: 保守扩量
    | >= 110%: 激进扩量
    ↓
生成可选动作列表
    ↓
    | 预算调整、tROAS调整等
    ↓
展示给优化师
```

---

## 六、成功指标（KPI）

### 6.1 系统性能指标

| 指标 | 目标值 | 衡量方式 |
|------|--------|---------|
| 监控覆盖率 | 100% | 所有操作都被记录到系统 |
| 评价及时性 | < 24小时 | 需要评价的campaign在24小时内完成评价 |
| API响应时间 | < 500ms (P95) | 前端API请求的响应时间 |
| 每日任务耗时 | < 10分钟 | 处理1000个campaigns的评价任务 |
| Google API调用量 | < 10,000次/天 | 控制在配额限制内 |
| 系统可用性 | > 99% | 月度可用时间比例 |

### 6.2 业务效果指标

| 指标 | 目标值 | 衡量方式 |
|------|--------|---------|
| 建议采纳率 | > 60% | 优化师采纳的建议数 / 系统生成的建议数 |
| 建议准确率 | > 70% | 被采纳的建议中，执行后达成率提升的比例 |
| 优化师效率提升 | > 50% | 每天巡检campaign的时间缩短 |
| 素材测试周期缩短 | > 40% | 从测试到复用的平均时间 |
| 出量好素材识别率 | > 80% | 系统识别出的"出量好素材"被验证有效的比例 |

### 6.3 投放效果指标

| 指标 | 目标值 | 衡量方式 |
|------|--------|---------|
| 整体ROAS提升 | > 10% | 使用系统前后的整体ROAS对比 |
| 亏损campaign比例下降 | > 30% | ROAS < 60%的campaigns数量下降 |
| 优秀campaign比例提升 | > 20% | ROAS >= 110%的campaigns数量增加 |
| 错误决策减少 | > 30% | 操作评分"失败"(<85%)的比例下降 |
| 预算浪费减少 | > 25% | 在表现差的campaigns上的浪费预算降低 |

### 6.4 用户满意度指标

| 指标 | 目标值 | 衡量方式 |
|------|--------|---------|
| 系统使用率 | > 90% | 优化师每周至少使用5天 |
| 功能满意度 | > 4.0/5.0 | 季度用户满意度调研 |
| 建议有用性 | > 4.0/5.0 | 优化师对建议质量的打分 |
| 系统推荐意愿 | > 80% | 愿意推荐给其他团队的优化师比例 |

---

## 七、风险与应对措施

### 7.1 技术风险

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|---------|
| Google Ads API限流 | 高 | 高 | 实现请求队列、数据缓存、批量请求 |
| 数据计算错误 | 中 | 高 | 单元测试、真实数据验证、人工抽查 |
| API调用失败 | 中 | 中 | 重试机制、降级方案、错误告警 |
| 数据库性能瓶颈 | 低 | 中 | 索引优化、查询优化、读写分离 |
| 定时任务失败 | 低 | 高 | 监控告警、手动补跑机制 |

### 7.2 业务风险

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|---------|
| 安全线计算不准确 | 中 | 高 | 多维度验证、人工校准、灰度发布 |
| 建议不被采纳 | 中 | 中 | 收集反馈、优化算法、提供解释 |
| 自动执行出错 | 低 | 高 | 人工确认、回滚机制、操作日志 |
| 优化师不信任系统 | 中 | 高 | 透明化逻辑、详细文档、培训支持 |
| 市场环境变化 | 低 | 中 | 安全线动态更新、支持人工调整 |

### 7.3 合规风险

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|---------|
| Google API政策变更 | 中 | 中 | 密切关注政策、快速适配 |
| 数据隐私问题 | 低 | 高 | 只存储必要数据、脱敏处理 |
| API滥用 | 低 | 高 | 限制调用频率、操作审计 |

---

## 八、未来扩展方向

### 8.1 短期扩展（3-6个月）

**多平台支持：**
- 增加iOS平台的支持
- 安全线按平台分层

**更细粒度的评价：**
- Ad Group级别的评价
- 关键词级别的评价
- 受众定向的评价

**智能提醒：**
- 当campaign表现异常时，实时推送告警
- 支持邮件、Slack、钉钉等多种提醒方式

### 8.2 中期扩展（6-12个月）

**多渠道支持：**
- Facebook Ads
- TikTok Ads
- Unity Ads
- 跨渠道对比分析

**机器学习预测：**
- 预测campaign未来7天的表现
- 预测素材的成功概率
- 智能推荐调整方案

**A/B测试框架：**
- 自动创建对照组
- 统计显著性检验
- 快速验证新策略

### 8.3 长期愿景（12个月以上）

**全自动投放：**
- AI自主决策调整预算和tROAS
- 人工只负责审核和兜底
- 持续学习优化决策算法

**行业标准化：**
- 开放API供其他团队使用
- 形成移动游戏投放的最佳实践
- 建立行业benchmark数据库

---

## 九、附录

### 9.1 术语表

| 术语 | 英文 | 定义 |
|------|------|------|
| ROAS7 | Return On Ad Spend (7-day) | 7日广告投资回报率，衡量短期ROI |
| RET7 | Retention (7-day) | 7日留存率，衡量用户质量 |
| CPI | Cost Per Install | 单个安装成本 |
| CVR | Conversion Rate | 转化率，安装数/展示数 |
| tROAS | Target ROAS | 目标ROAS，告诉Google算法期望的ROI |
| LTV | Lifetime Value | 用户生命周期价值，通常180天 |
| 安全线 | Baseline | 基于180天前历史数据的及格线 |
| 达成率 | Achievement Rate | 实际值/安全线×100% |
| 测试Campaign | Test Campaign | 总消耗<$1000，用于测试素材 |
| 成熟Campaign | Mature Campaign | 总消耗≥$1000，用于规模化投放 |
| 出量好素材 | High-Volume Creative | CVR高且能拿到足够流量的素材 |

### 9.2 参考资料

- [Google Ads API官方文档](https://developers.google.com/google-ads/api/docs/start)
- [移动应用推广最佳实践](https://developers.google.com/google-ads/api/docs/app-campaigns)
- [ROAS优化指南](https://support.google.com/google-ads/answer/6268637)
- [App Campaign性能分析](https://support.google.com/google-ads/answer/6247380)

---

## 十、文档变更历史

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|---------|------|
| v1.0 | 2024-10-15 | 初始版本，监控功能PRD | Chaoyu |
| v2.0 | 2024-11-19 | 新增评价系统、建议系统、执行系统 | Chaoyu |

---

**核心原则：这个系统的终极目标是帮助优化师"更快地收到反馈，更快地迭代"。所有功能设计都围绕这个目标展开。**
